import{s as b}from"./service.b55ec95b.js";import{_ as f,G as _,r as p,o as i,c as g,w as u,a as h,t as n,b as c,d as l,F as o,e as d,n as v}from"./index.750fb093.js";const x={name:"UptimeKuma",mixins:[b],props:{item:Object},components:{Generic:_},data:()=>({incident:null,heartbeat:null}),computed:{dashboard:function(){return this.item.slug?this.item.slug:"default"},status:function(){return this.incident?this.incident.incident==null?this.pageStatus:"bad":""},lastHeartBeatList:function(){let t={};for(let a in this.heartbeat.heartbeatList){let e=this.heartbeat.heartbeatList[a].length-1;t[a]=this.heartbeat.heartbeatList[a][e]}return t},pageStatus:function(){if(!this.heartbeat||Object.keys(this.heartbeat.heartbeatList).length===0)return"";let t="good",a=!1;for(let e in this.lastHeartBeatList)this.lastHeartBeatList[e].status==1?a=!0:t="warn";return a||(t="bad"),t},statusMessage:function(){return this.incident?this.incident.incident?this.incident.incident.title:this.pageStatus=="warn"?"Partially Degraded Service":"All Systems Operational":""},uptime:function(){if(!this.heartbeat)return 0;const t=Object.values(this.heartbeat.uptimeList);return((t.reduce((e,r)=>e+r,0)/t.length||0)*100).toFixed(1)}},created(){this.item.url=`${this.item.url}/status/${this.dashboard}`,this.fetchStatus()},methods:{fetchStatus:function(){this.fetch(`/api/status-page/${this.dashboard}?cachebust=${Date.now()}`).catch(t=>console.error(t)).then(t=>this.incident=t),this.fetch(`/api/status-page/heartbeat/${this.dashboard}?cachebust=${Date.now()}`).catch(t=>console.error(t)).then(t=>this.heartbeat=t)}}},y={class:"title is-4"},L={class:"subtitle is-6"};function S(t,a,e,r,k,s){const m=p("Generic");return i(),g(m,{item:e.item},{content:u(()=>[h("p",y,n(e.item.name),1),h("p",L,[e.item.subtitle?(i(),c(o,{key:0},[l(n(e.item.subtitle),1)],64)):s.status?(i(),c(o,{key:1},[l(n(s.statusMessage),1)],64)):d("",!0)])]),indicator:u(()=>[s.status?(i(),c("div",{key:0,class:v(["status",s.status])},n(s.uptime)+"% ",3)):d("",!0)]),_:1},8,["item"])}var C=f(x,[["render",S],["__scopeId","data-v-684bc275"]]);export{C as default};
